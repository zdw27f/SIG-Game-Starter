${"##########################"}
# IMPLEMENTATION DETAILS #
# DO NOT EDIT THIS FILE  #
${"##########################"}

file(READ ${"${CMAKE_CURRENT_SOURCE_DIR}"}/additional_files.txt extras)

add_custom_target(${game_name}_additional ALL${'''
    COMMAND ${CMAKE_COMMAND} -E touch ${CMAKE_CURRENT_SOURCE_DIR}/CMakeLists.txt
    DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/additional_files.txt)

string(REPLACE "\\n" ";" extras ${extras})

foreach(file IN ITEMS ${extras})
    string(SUBSTRING ${file} 0 1 check)
    if(NOT ${check} STREQUAL "#")
        if(NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/${file})
            message(FATAL_ERROR "Could not find additional file \\\"${file}\\\"!")
        endif(NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/${file})
        list(APPEND to_add ${CMAKE_CURRENT_SOURCE_DIR}/${file})
        message(STATUS ${file})
    endif(NOT ${check} STREQUAL "#")
endforeach(file)
'''}

add_dependencies(dependencies ${game_name}_additional)

set(FILES
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/ai.cpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/ai.hpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/impl/ai_impl.cpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/impl/${underscore(game_name)}.cpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/impl/${underscore(game_name)}.hpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/impl/${underscore(game_name)}_fwd.hpp
% for game_obj_key in sort_dict_keys(game_objs):
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/${underscore(game_obj_key)}.cpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/${underscore(game_obj_key)}.hpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/impl/${underscore(game_obj_key)}_impl.cpp
% endfor
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/game.cpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/game.hpp
    ${"${CMAKE_CURRENT_SOURCE_DIR}"}/impl/game_impl.cpp
    ${"${to_add}"}
    PARENT_SCOPE)
